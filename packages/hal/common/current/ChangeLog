1999-09-01  Gary Thomas  <gthomas@cygnus.co.uk>

	* include/pkgconf/hal.h: Always include target and platform package
	include (pkgconf) files.

1999-08-26  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* src/generic-stub.c (__hex2mem_helper):
	Use target_register_t when casting to address type, rather than long
	Since the compiler can choose arbitrary alignment of unions, force
	to use byte array only
	Restore use of loop termination test for *hexMemSrc, just in case
	since that's how it used to be
	Increment destination, not source at end of loop
	
	(__mem2hex_helper):
	Use target_register_t when casting to address type, rather than long.
	Since the compiler can choose arbitrary alignment of unions, force
	to use byte array only. Therefore use single __read_mem_safe() call
	
	* src/hal_stub.c (__do_copy_mem): Reassign back from dst/src at start
	of each	"if" clause in case we go round the loop again.

1999-08-24  Gary Thomas  <gthomas@cygnus.co.uk>

	* src/hal_stub.c (__do_copy_mem): Move temp variables to top of
	function - potentially safer if there is an error.

1999-08-23  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* src/generic-stub.c (__process_packet): For 'g' and 'G' packets,
	when the register size differs from sizeof(target_register_t) we must
	adjust according to the endianness 

	* include/hal_stub.h: Ensure __LITTLE_ENDIAN__ is defined on
	little-endian targets

	* src/hal_stub.c (__build_t_packet): Use the correct register sizes
	for PC and SP rather than assuming they are the same as target_register_t

1999-08-23  Gary Thomas  <gthomas@cygnus.co.uk>

	* include/generic-stub.h: Change prototypes for internal functions.

	* src/hal_stub.c (__do_copy_mem): 
	* src/generic-stub.c (__mem2hex_helper): Rework to perform aligned,
	multi-byte operations when conditions allow.  This should handle
	most "hardware register" access cases.  Note: there currently is
	no good way to force GDB to require/use such accesses.

1999-08-17  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* tests/intr.c (cyg_start): Use CYG_TEST_NA rather than a pass saying
	it's inapplicable

1999-08-16  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* include/pkgconf/hal.h: Rename CYG_HAL_MN10300_AM32_STDEVAL1 to
	CYG_HAL_MN10300_AM31_STDEVAL1

1999-08-13  Nick Garnett  <nickg@cygnus.co.uk>

	* src/hal_stub.c: Removed superfluous trace() extern.

1999-08-06  Jesper Skov  <jskov@cygnus.co.uk>

	* src/generic-stub.c (__process_packet): FLush and clear caches
	after call to __single_step.

1999-07-05  Jesper Skov  <jskov@cygnus.co.uk>

	* tests/intr.c: Don't use kernel's RTC definitions.

1999-07-02  Jesper Skov  <jskov@cygnus.co.uk>
        PR20157
	* tests/cache.c: Print stride values, preventing timeout on slow
	targets.

1999-06-28  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h (CYGDBG_HAL_DEBUG_GDB_BREAK_SUPPORT):
	Fixed parent.

1999-06-24  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* include/pkgconf/hal.h: Clarify descriptions of
	CYGDBG_HAL_DEBUG_GDB_BREAK_SUPPORT and
	CYGDBG_HAL_DEBUG_GDB_CTRLC_SUPPORT.

1999-06-17  Nick Garnett  <nickg@cygnus.co.uk>

	* include/pkgconf/hal.h: Added CYGDBG_HAL_DEBUG_GDB_CTRLC_SUPPORT
	to enable inclusion of ^C interrupt handler. Added CDL to control
	it.

1999-06-10  Hugo Tyson  <hmt@cygnus.co.uk>

	* include/pkgconf/hal.h: Add support for the PowerPC target MBX860
	platform, CYG_HAL_POWERPC_MBX.

1999-06-10  Gary Thomas  <gthomas@cygnus.co.uk>

	* src/hal_stub.c: Need to init register pointer.

1999-05-31  Jesper Skov  <jskov@cygnus.co.uk>

	* src/hal_stub.c: Respect HAL_BREAKINST_SIZE setting.

1999-05-28  Nick Garnett  <nickg@cygnus.co.uk>

	* src/hal_stub.c (initHardware): Added call to
	HAL_STUB_PLATFORM_INIT if it is defined.

	* include/pkgconf/hal.h: Added a #undef for CYG_HAL_ROM_MONITOR,
	largely so that a stubrom permutation can define it.

1999-05-27  Nick Garnett  <nickg@cygnus.co.uk>

	* src/hal_stub.c: Do not call HAL_ICACHE_INVALIDATE_ALL() and
	HAL_DCACHE_INVALIDATE_ALL() in __instruction_cache() and
	__data_cache() for MIPS targets. These macros are simply
	duplicates.

1999-05-27  Jesper Skov  <jskov@cygnus.co.uk>

	* tests/cache.c:  Added handling of unified caches.

1999-05-25  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* tests/cache.c: Use HAL_DCACHE_SYNC if available

1999-05-21  Jesper Skov  <jskov@cygnus.co.uk>

	* src/hal_stub.c (__install_traps): Set exit vector to __reset.

	
1999-05-21  Jesper Skov  <jskov@cygnus.co.uk>

	* tests/intr.c: Get RTC values from CYGBLD_HAL_PLATFORM_H.
	Ensure there are fallback definitions.

	* src/hal_stub.c (handle_exception_cleanup): Added optional call
	of HAL_STUB_PLATFORM_STUBS_FIXUP macro.

1999-05-18  Jesper Skov  <jskov@cygnus.co.uk>

	* src/hal_stub.c (hal_output_gdb_string): Added missing ;

1999-05-13  Nick Garnett  <nickg@cygnus.co.uk>

	The following changes were all made on a branch and imported into
	the main trunk later.
	
    1999-05-11  Nick Garnett  <nickg@cygnus.co.uk>

	* include/pkgconf/hal.h:
	tidied up all MIPS targets to include CYGBLD_HAL_TARGET_H. This
	will eventually apply to all configurations.

    1999-05-06  Nick Garnett  <nickg@cygnus.co.uk>

	* src/PKGconf.mak (COMPILE): Added dbg-threads-syscall.c.

	* include/dbg-thread-syscall.h: 
	* src/dbg-threads-syscall.c:
	Files added to enable support for thread-awareness in GDB stub
	ROMs. The .h file has been moved from kernel/src/debug.

    1999-04-28  Nick Garnett  <nickg@cygnus.co.uk>

	* src/hal_stub.c (__build_t_packet): Changed sp variable to a
	non-pointer type to force it to be installed in the T packet with
	the right size.

	* src/drv_api.c: Added cyg_interrupt_call_pending_DSRs() to keep
	HAL happy in non-kernel configurations.

	
1999-04-28  Bart Veer  <bartv@cygnus.co.uk>

	* src/PKGconf.mak:
	Use the new rules for generating libextras.a

1999-04-27  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: GDB_BREAK support now available for ARM
	targets.
1999-04-16  Bart Veer  <bartv@cygnus.co.uk>

	* src/PKGconf.mak: 
	* src/dummy.c:
	New file that can always be added to libextras.a without
	affecting image sizes.

1999-04-14  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* include/hal_stub.h: 
	Make sure all functions have C linkage even in C++

1999-04-14  Jesper Skov  <jskov@cygnus.co.uk>
        PR 19845
	* src/generic-stub.c (__process_packet): Reset _register pointer
	to the exception state before attempting to set up single-step
	magic.

1999-04-14  Jesper Skov  <jskov@cygnus.co.uk>

	* include/hal_stub.h: Added declaration for __stub_copy_registers.

1999-04-14  Jesper Skov  <jskov@cygnus.co.uk>

	* src/hal_stub.c: Use HAL_xCACHE_IS_ENABLED if defined.

1999-04-09  Jesper Skov  <jskov@cygnus.co.uk>

	* src/hal_stub.c:
	Moved get_register and put_register here. Made them access the
	currently selected register set.

1999-03-22  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* include/dbg-threads-api.h: Update copyright

	* src/generic-stub.c: Change Cygnus Support->Cygnus Solutions

	* src/thread-packets.c: Update copyright

	* src/thread-pkts.h: Update copyright

1999-03-19  Nick Garnett  <nickg@cygnus.co.uk>

	* tests/cache.c: Added interrupt disable and enable to cache state
	change blocks, in line with similar changes to kcache1.

1999-03-17  Jesper Skov  <jskov@cygnus.co.uk>

	* src/hal_stub.c (hal_output_gdb_string): Use disable/restore
	macros to make sure it works even when interruptible() is a NOP
	function.

1999-03-10  Nick Garnett  <nickg@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Changed include of hal_tx39_jmr3904.h to hal_tx39.h.

1999-03-05  Nick Garnett  <nickg@cygnus.co.uk>

	* include/drv_api.h: 
	* src/drv_api.c:
	Fixed some typos in non-kernel configuration support.

1999-03-04  Jesper Skov  <jskov@cygnus.co.uk>
        PR 19367
	* include/pkgconf/hal.h: Exclude GDB stubs on sparc.

1999-02-26  Jesper Skov  <jskov@cygnus.co.uk>

	* src/generic-stub.c: 
	* include/generic-stub.h: 
	Added binary download patches from libstub.
	
1999-02-25  Nick Garnett  <nickg@cygnus.co.uk>

	* include/drv_api.h:
	* src/drv_api.c: 
	Added these files to define driver API.

1999-02-23  Nick Garnett  <nickg@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Added include of <pkgconf/hal_tx39_jmr3904.h> to get TX39 speed
	configuration options.

1999-02-20  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* tests/intr.c: 
	Rename CYGNUM_VECTOR_RTC -> CYGNUM_HAL_INTERRUPT_RTC in line with
	HAL changes

1999-02-17  Jesper Skov  <jskov@cygnus.co.uk>

	* src/hal_stub.c: 
	* src/generic-stub.c (__handle_exception): 
	Only include cyg_hal_gdb_break magic when stub is configured to
	handle GDB BREAK signals.

1999-02-17  Jesper Skov  <jskov@cygnus.co.uk>

	* src/generic-stub.c (__handle_exception): Moved special signal
	handling here to avoid duplication for all architectures.

1999-02-16  Jesper Skov  <jskov@cygnus.co.uk>

	* src/stubrom/stubrom.c: Changed set_debug_traps to initialize_stub.

	* include/hal_stub.h: [added]
	* include/generic-stub.h:
	* src/hal_stub.c:     [added]
	* src/board.h:        [added]
	* src/thread-pkts.h: 
	* src/thread-packets.c: 
	* src/generic-stub.c: 
	* src/PKGconf.mak: 
	Merged in latest libstub changes. Moved most eCos specific changes
	into hal_stub.[ch], reducing effort required for further
	merging/integration.

1999-02-05  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Cleaned up the MPC8xx configuration.

1999-01-29  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Added simple MPC8xx configuration.


1999-01-26  Hugo Tyson  <hmt@cygnus.co.uk>

	* tests/cache.c (time0): Waste much less time if running in a
	simulator.  Do only 40 loops instead of 4000.
	In consequence the nasty meddling with MAX_STRIDE depending on
	HAL_xxx_SIM package definitions can go.
	
1999-01-22  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Renamed CYG_HAL_POWERPC_FADS to
	CYGPKG_HAL_POWERPC_FADS.

1999-01-21  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Tidy up and update description
	Add new CYGSEM_HAL_STOP_CONSTRUCTORS_ON_FLAG option to allow default
	priority static constructors to be deferred
	Remove all traces of non-CYG_KERNEL_USE_INIT_PRIORITY code
	
1999-01-21  Jesper Skov  <jskov@cygnus.co.uk>
        Merge with FADS branch.
	
        1998-12-17  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Don't allow GDB BREAK support on FADS.
	Define _MPC860, not _MP860.

        1998-12-17  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Added FADS entry from Kevin Hester <KHester@opticworks.com>.

	1999-01-19  Hugo Tyson  <hmt@cygnus.co.uk>

	* include/pkgconf/hal.h: 
	Add CYG_KERNEL_USE_INIT_PRIORITY for SPARCLITE.


1999-01-18  Jesper Skov  <jskov@cygnus.co.uk>
        PR 18823
	* include/pkgconf/hal.h: Don't allow GDB stubs to be configured
	for Linux target.

1999-01-18  Jesper Skov  <jskov@cygnus.co.uk>
	PR 18822
	* include/pkgconf/hal.h: GDB_BREAK support not available for ARM
	targets.
	
1999-01-14  Gary Thomas  <gthomas@cygnus.co.uk>

	* src/stubrom/PKGconf.mak: Rename 'TESTS' to 'PROGS' due to 
	changes in 'makrules.prv'.

1999-01-14  Jesper Skov  <jskov@cygnus.co.uk>

	* src/stubrom/stubrom.c (cyg_start): Fix compiler warning.

	* include/dbg-threads-api.h: Include cyg_type.h to get externC
	definition.

1999-01-14  Nick Garnett  <nickg@cygnus.co.uk>

	* include/dbg-threads-api.h: Added prototype for dbg_scheduler().

1999-01-13  Gary Thomas  <gthomas@cygnus.co.uk>

	* src/generic-stub.c (__output_hex_value): Change buffer size
	[2048 was rather large] and make stack based.  Also don't
	allow for string to exceed buffer.

1999-01-13  Jesper Skov  <jskov@cygnus.co.uk>

	* src/generic-stub.c (strcpy): Terminate copied string.

1999-01-11  Jesper Skov  <jskov@cygnus.co.uk>

	* tests/intr.c (CYGNUM_KERNEL_COUNTERS_RTC_PERIOD): Added RTC data
	for Linux.

Wed Dec  9 14:07:30 GMT 1998  Chris Provenzano  <proven@cygnus.com>

	* include/pkgconf/hal.h: Compile the i386 linux target with
	CYG_KERNEL_USE_INIT_PRIORITY defined.


1999-01-04  Jesper Skov  <jskov@cygnus.co.uk>

	* src/generic-stub.c (interruptible): Cleaned up a bit.

1999-01-04  Jesper Skov  <jskov@cygnus.co.uk>
	PR 18572

	* tests/cache.c: Purge data cache before invalidating it.

1998-12-09  Gary Thomas  <gthomas@cygnus.co.uk>

	* src/generic-stub.c: Better handling of errors while stubs
	are accessing memory on behalf of GDB.  Requires support for
	GCC 'computed goto label' in top-level exception handler.

1998-12-09  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Removed the
	CYGARC_HAL_COMMON_EXPORT_CPU_MACROS option. Causing failures in
	permutation tests.

1998-12-07  Jesper Skov  <jskov@cygnus.co.uk>

	* src/generic-stub.c (process_exception): Send an acknowledge char
	on first entry so GDB doesn't timeout before resending its initial
	packet.

1998-11-26  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Added
	CYGARC_HAL_COMMON_EXPORT_CPU_MACROS.

1998-11-23  Jesper Skov  <jskov@cygnus.co.uk>

	* tests/cache.c: Only run with stride 1 on SIMs.

1998-11-23  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Define SIM as a 603 CPU.

1998-11-19  Jesper Skov  <jskov@cygnus.co.uk>

	* tests/intr.c:
	Make the test do nothing if kernel real-time clock is enabled.
	Added different timer constants for PPC SIM and HW.

1998-11-17  Jesper Skov  <jskov@cygnus.co.uk>

	* tests/intr.c: 
	* include/pkgconf/hal.h:
	Renamed CYG_HAL_POWERPC_MP860 to CYG_HAL_POWERPC_MPC860.
	
1998-11-04  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Made CYGDBG_HAL_DEBUG_GDB_BREAK_SUPPORT a
	sub-option of CYGDBG_HAL_DEBUG_GDB_INCLUDE_STUBS.

1998-11-16  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Allow GDB stubs to be configured for
	MN10300 HW. Allow GDB_BREAK for all but tx39.

1998-11-04  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Made CYGDBG_HAL_DEBUG_GDB_BREAK_SUPPORT a
	sub-option of CYGDBG_HAL_DEBUG_GDB_INCLUDE_STUBS.

1998-11-04  Jesper Skov  <jskov@cygnus.co.uk>

	* src/generic-stub.c (process_packet): Flush D cache before
	invalidating I cache.

1998-11-02  Jesper Skov  <jskov@cygnus.co.uk>

	* src/generic-stub.c (__handle_exception): Check for breakpoints
	set by GDB interrupt handler.

1998-10-25  Jesper Skov  <jskov@cygnus.co.uk>

	* src/thread-packets.c: Fixed closing #endif comment.

	* src/generic-stub.c: Fixed closing #endif comment.

1998-10-23  Jesper Skov  <jskov@cygnus.co.uk>

	* src/hal_common.c: Removed. We can't use weak default functions
	when they may conflict with strong functions in the library.

1998-10-23  Jesper Skov  <jskov@cygnus.co.uk>

	* include/generic-stub.h: Added __interruptible_control.

1998-10-23  Jesper Skov  <jskov@cygnus.co.uk>
        PR 17460, PR 17913

	* include/pkgconf/hal.h: Let HAL exception support require Kernel
	exception support.

1998-10-21  Jesper Skov  <jskov@cygnus.co.uk>
        PR 17842

	* include/pkgconf/hal.h: Let HAL GDB thread support require Kernel
	GDB thread support.

1998-10-20  Jesper Skov  <jskov@lassi.cygnus.co.uk>
        PR 17460

 	* src/hal_common.c: Added. Includes a weak handle_exception
 	definition.

1998-10-20  Jesper Skov  <jskov@cygnus.co.uk>
        PR 17885, 17880, 17841

	* include/pkgconf/hal.h: Don't allow GDB stubs to be configured
	for SIMs or MN10300.

1998-10-19  Jesper Skov  <jskov@lassi.cygnus.co.uk>

	* src/thread-packets.c: Sync'd with libstub source.

1998-10-16  Bart Veer  <bartv@cygnus.co.uk>

	* include/pkgconf/hal.h (CYGNUM_HAL_COMMON_INTERRUPTS_STACK_SIZE):
	Added new configuration option for interrupt stack size.

Thu Oct 15 21:25:55 1998  Jonathan Larmour  <jlarmour@cygnus.co.uk>

	* include/pkgconf/hal.h: 
	Make CYGFUN_HAL_COMMON_KERNEL_SUPPORT require the kernel, as it
	is enabling this is eCos-kernel specific, and relies on 
	configuration options defined only in the kernel
	Required for PR 17229

1998-10-15  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h (CYGDBG_HAL_DEBUG_GDB_BREAK_SUPPORT):
	Added config option.

1998-10-14  Nick Garnett  <nickg@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Move some configury from kernel.h to here. Particularly the
	support for GDB stubs.

	* tests/cache.c: 
	* tests/context.c: 
	* tests/intr.c: 
	* tests/PKGconf.mak:
	New directory of HAL-only test programs. Currently contains some
	very basic test programs.

	* include/generic-stub.h:
	* include/dbg-threads-api.h:
	* src/generic-stub.c:
	* src/thread-packets.c: 
	* src/thread-pkts.h: 
	* src/stubrom/PKGconf.mak: 
	* src/stubrom/stubrom.c: 
	Moved these files here from kernel.

1998-10-08  Gary Thomas  <gthomas@penang.cygnus.co.uk>

	* include/pkgconf/hal.h: 
	Add support for new architecture.

1998-09-23  Nick Garnett  <nickg@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Switched TX39 over to using CYGMON from GDB stubs.

Tue Sep 15 19:13:04 1998  David Moore  <dsm@keema.cygnus.co.uk>

	* include/pkgconf/hal.h: Cleaned up comments.

Mon Sep 14 11:08:26 1998  Jesper Skov  <jskov@lassi.cygnus.co.uk>
        PR 17230

	* include/pkgconf/hal.h: Added IMP_HAL_COMMON_INTERRUPTS_CHAIN
	option.

1998-09-14  Bart Veer  <bartv@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Fixed typo in description.

1998-09-12  Bart Veer  <bartv@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Sort out exception handling options (PR 16953)
	Added missing descriptions (PR 17184)

Tue Sep  8 17:16:39 1998  Hugo Tyson  <hmt@cygnus.co.uk>

	* include/pkgconf/hal.h: 
	Elide some spurious redefines of CYG_HAL_MN10300_STDEVAL1 and
	CYG_HAL_MN10300_SIM within ifdefs conditioned on same.

1998-09-03  Bart Veer  <bartv@cygnus.co.uk>

	* include/pkgconf/hal.h:
	CYGPKG_HAL_COMMON is now a component, not a package.

1998-09-02  Bart Veer  <bartv@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Moved target and platform specific configuration data to
	the appropriate packages.
	
	Symbols identifying the target hardware should be just defined,
	not given a value, as per the coding standards.

Mon Aug 31 09:16:08 1998  Jesper Skov  <jskov@cygnus.co.uk>

	* include/pkgconf/hal.h: Added INIT_PRIORITY default setting for
	powerpc.

1998-08-28  Bart Veer  <bartv@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Added configuration data.

1998-08-20  Nick Garnett  <nickg@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Moved definition of CYG_KERNEL_USE_INIT_PRIORITY here from
	kernel.h.

1998-08-18  Nick Garnett  <nickg@cygnus.co.uk>

	* include/pkgconf/hal.h:
	Created this file to contain HAL config options.

//===========================================================================
//####COPYRIGHTBEGIN####
//
// -------------------------------------------
// The contents of this file are subject to the Cygnus eCos Public License
// Version 1.0 (the "License"); you may not use this file except in
// compliance with the License.  You may obtain a copy of the License at
// http://sourceware.cygnus.com/ecos
// 
// Software distributed under the License is distributed on an "AS IS"
// basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See the
// License for the specific language governing rights and limitations under
// the License.
// 
// The Original Code is eCos - Embedded Cygnus Operating System, released
// September 30, 1998.
// 
// The Initial Developer of the Original Code is Cygnus.  Portions created
// by Cygnus are Copyright (C) 1998,1999 Cygnus Solutions.  All Rights Reserved.
// -------------------------------------------
//
//####COPYRIGHTEND####
//===========================================================================
