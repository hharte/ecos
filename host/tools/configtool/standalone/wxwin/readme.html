<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<TITLE>eCos Configuration Tool Version 2</TITLE>
	<META NAME="GENERATOR" CONTENT="StarOffice/5.1 (Win32)">
	<META NAME="CREATED" CONTENT="20010523;11445847">
	<META NAME="CHANGEDBY" CONTENT="Julian Smart">
	<META NAME="CHANGED" CONTENT="20010531;13251797">
	<!-- StartFragment -->
</HEAD>
<BODY>
<H1>eCos Configuration Tool Version 2</H1>
<HR SIZE=3 NOSHADE>
<P>This page describes how to run and compile the new, portable
version of the Configuration Tool.</P>
<H2>Contents</H2>
<OL>
	<LI><P>Introduction and where to get the Configuration Tool</P>
	<LI><P>What's in this release?</P>
	<LI><P>Installing the Configuration Tool</P>
	<LI><P>Running the Configuration Tool</P>
	<LI><P>Frequently Asked Questions</P>
	<LI><P>Building the Configuration Tool under Linux</P>
	<LI><P>Building the Configuration Tool under Windows</P>
</OL>
<H2>Introduction</H2>
<P>Welcome to the eCos Configuration Tool, a graphical tool to help a
user configure and build a custom version of the eCos operating
system.</P>
<P>This is a cross-platform version built using the wxWindows
toolkit. The tool uses the GTK+ widget set on Linux, and the WIN32
API on Windows 9x, Windows NT and Windows 2000. It is similar to the
MFC, Windows-only version but at present lacks a few of its features,
such as the Memory Layout Tool and the ability to run tests from
within the tool.</P>
<P>Please note that this is alpha-level code. However, all feedback
to the eCos team is appreciated, via <a href="mailto:ecos-discuss@sources.redhat.com">ecos-discuss@sources.redhat.com</a>
or the bug reporting form at
<A HREF="http://sources.redhat.com/ecos/problemreport.html">http://sources.redhat.com/ecos/problemreport.html</A>.</P>
<P>The source for the Configuration Tool is available from anonymous
CVS.</P>
<P>Binary packages are also available (see instructions below).</P>
<H2>What's in this release?</H2>
<P>This version allows you to edit, load, save and build eCos
configurations much as the original Windows Configuration Tool.
However the following features are missing with respect to the
original tool:</P>
<OL>
	<LI><P>Memory Layout Tool</P>
	<LI><P>Running tests from the tool</P>
	<LI><P>Administration functionality (initial code present but
	untested)</P>
	<LI><P>Gauge indicating time left to build library and tests</P>
</OL>
<P>The following features are present in the new tool but not in the
original tool:</P>
<OL>
	<LI><P>Repository Information dialog (available from the Help menu)</P>
	<LI><P>Most dialogs are resizeable</P>
</OL>
<P>Documentation works a little differently. Instead of using a
precompiled HTML Help file, this version compiles a documentation
index on the fly for use with its own internal HTML help viewer. The
cached indexes are placed in the .eCosDocs directory under the user's
home directory (Linux) or in the installed repository (Windows). The
internal viewer cannot cope with all of the eCos and GNUPro
documentation, so for these occasions please use an external browser
(see the Settings dialog).</P>
<P>The documentation for the Configuration Tool is supplied in its
install directory as HTML only, and is a modified version of the eCos
User's Guide. Invoke the tool help from the &quot;Help|Configuration
Tool Help&quot; menu item, or from the internal help viewer's index,
under &quot;Linux Configuration Tool Guide&quot;.</P>
<H4>Known bugs:</H4>
<P>The documentation index only lists the packages in the
configuration active when the documentation was indexed (normally
when the repository is first seen by the Configuration Tool).</P>
<H2>Installing the Configuration Tool</H2>
<P>The Configuration Tool can be used with existing eCos
installations and CVS source hierarchies. You can get the binaries
from <A HREF="ftp://sources.redhat.com/pub/ecos/ct2/">ftp://sources.redhat.com/pub/ecos/ct2/</A>.</P>
<P>See also mirror sites at:</P>
<P><A HREF="http://sources.redhat.com/ecos/mirror.html">http://sources.redhat.com/ecos/mirror.html</A><BR><A HREF="http://sources.redhat.com/mirrors.html">http://sources.redhat.com/mirrors.html</A></P>
<P>Please try to use a mirror site close to you, as it will be
faster.</P>
<H3>Under Linux:</H3>
<P>Download <A HREF="ftp://sources.redhat.com/pub/ecos/ct2/configtool-2.0-i386.tar.gz">configtool-2.0-i386.tar.gz</A>.</P>
<P>Unarchive the tar file into a suitable directory and add the
directory to your path. You do not have to install it as root. For
example:</P>
<P>% mkdir -p
<TT>
/opt/ecos/configtool/bin<BR>% cd /opt/ecos/configtool/bin<BR>% tar
xvfz /cdrom/configtool.tgz<BR>% export
PATH=/opt/ecos/configtool/bin:$PATH</TT></P>
<P>The following files will be extracted to the installation
directory:</P>
<P><TT>configtool, ecoslogo.png,
rhlogo.png, about.htm, README.txt, license.txt, ecosplatforms.tar.gz,
manual/</TT></P>
<P>Optionally, untar the contents of ecosplatforms.tar.gz into your
home directory, where it will create a directory called
.eCosPlatforms. The information in these files isn't yet used by the
Configuration Tool, but will keep the tool from generating some
warnings.</P>
<P>The executable is statically linked to the wxWindows library, but
does require the GTK+ 1.2, GDK 1.2 and TCL 8.x libraries to be
installed.</P>
<H3>Under Windows:</H3>
<P>Download <A HREF="ftp://sources.redhat.com/pub/ecos/ct2/configtool-2.0-setup.exe">configtool-2.0-setup.exe</A>.</P>
<P>Run the installer provided, preferably having installed eCos for
Windows on your PC previously so the tool can pick up the relevant
registry information added by the eCos installer. A new eCos
Configuration Tool group will be added to your Start menu and a
shortcut to the Configuration Tool will appear on your desktop.</P>
<H2>Running the Configuration Tool</H2>
<P>Run the configtool executable and (on Linux) ignore any initial
console messages, which may be suppressed by unarchiving
ecosplatforms.tar.gz as per the installation instructions above.</P>
<P>You can invoke the tool with zero, one, or two parameters. The two
parameters can be the location of the repository and/or the location
of a save file (extension .ecc). If no parameters are passed, the
tool will look in the current directory for a save file and also (on
Linux) in the /opt/ecos directory for a suitable repository. Failing
that, the tool will use the last loaded repository or ask the user
for a suitable location.</P>
<P>For detailed information about the Configuration Tool, please
refer to the HTML manual which may be invoked from the Help menu or
by clicking on the &quot;Linux Configuration Tool Guide&quot; in the
internal help system's contents. This is similar to but different
from &quot;The eCos Configuration Tool&quot; section in the eCos User
Guide, which refers to the original Windows version of the
configuration tool (as opposed to the new cross-platform Linux and
Windows version).</P>
<H2>Frequently Asked Questions</H2>
<P><B>Q: On Linux, invoking HTML documentation for a configuration
item doesn't seem to work.</B></P>
<P>A: You need to have a .mailcap entry similar to the following:</P>
<P><TT>text/html; netscape
-no-about-splash %s</TT>
</P>
<P>and in .mime.types:</P>
<P><TT>type=text/html \<BR>desc=&quot;HTML
document&quot; \<BR>exts=&quot;htm,html&quot;</TT></P>
<P>Also, be aware that the browser can sometimes end up behind the
configuration tool so it may have run even if you think it didn't.</P>
<P><B>Q: On Linux, right-clicking in the configuration pane and
choosing 'What's This?' causes an information window to pop up and
then quickly disappear.</B></P>
<P>A: If the window manager options are set to raise a window when it
gains the focus, the information window can get sent behind the
application window when the popup menu loses focus. Either adjust
your window manager settings, or use an alternate way of invoking
help for the item: click on the arrow/question mark toolbar button,
then on the item you are interested in.</P>
<P><B>Q: The internal HTML help viewer doesn't display HTML
correctly.</B></P>
<P>A: The internal HTML help viewer cannot display some of the more
complex HTML correctly, such as the GNUPro reference. We hope to
provide the documentation in a suitable form in future, but for now,
please use an external browser to view this documentation. You can
use the Settings dialog, Viewers tab, to choose to view using an
external browser.</P>
<P><B>Q: Why does the Configuration Tool use wxWindows?</B></P>
<P>A: wxWindows is an open source, mature multi-platform GUI toolkit
for C++. It makes platform-independence relatively easy to achieve,
whilst remaining compatibility with the look and feel of GTK+ and
WIN32 on the respective platforms. wxWindows was chosen on its own
merits but, by sheer coincidence, the author of the new Configuration
Tool is also the original author of wxWindows. Using a
platform-independent API will make it easier to port the
Configuration Tool to other platforms if needed.</P>
<P><B>Q: Where can I get more information about wxWindows?</B></P>
<P>A: The wxWindows web site is at <A HREF="http://www.wxwindows.org/">http://www.wxwindows.org</A>.
wxWindows distributions come with documentation in a variety of
formats.</P>
<P><B>Q: Does the new Configuration Tool make the old one obsolete?</B></P>
<P>A: Not yet. The new tool doesn't yet support some features, such
as the Memory Layout Tool and the Run Tests dialog. When these have
been implemented, and the tool has been subject to the required
quality assurance procedure, then we can retire the old tool.</P>
<P><B>Q: How can I help improve the Configuration Tool?</B></P>
<P>A: All help is very welcome: please see
<A HREF="http://sources.redhat.com/ecos/faq.html">http://sources.redhat.com/ecos/faq.html</A>
for how to contribute.</P>
<P><B>Q: Who do I contact when things go wrong?</B></P>
<P>A: Please discuss problems on the ecos-discuss mailing list: see
<A HREF="http://sources.redhat.com/ecos/intouch.html">http://sources.redhat.com/ecos/intouch.html</A>.</P>
<P><B>Q: The compiler fails to compile dcclient.cpp. What do I do?</B></P>
<P>A: It may be that you have a non-standard GTK+ 1.2.6 which has
changes backported from 1.2.7. Use the makefile target 'wxgtkfix' to
fix this after the error has happened (i.e. after configure has
produced the setup.h and makefiles):</P>
<P><TT>% make -f
$CONFIGTOOLDIR/Makefile WXDIR=$WXDIR ECOSDIR=$ECOSDIR LEVEL=release
wxgtkfix</TT></P>
<P>or</P>
<P><TT>% make -f
$CONFIGTOOLDIR/Makefile WXDIR=$WXDIR ECOSDIR=$ECOSDIR LEVEL=debug
wxgtkfix</TT></P>
<P>Now use the 'wx ecc ct' targets (not 'full') to continue building.</P>
<H2>Building the Configuration Tool under Linux</H2>
<P>This build system is subject to change.</P>
<H4>You will need:</H4>
<OL>
	<LI><P>gcc 2.95.2 or later</P>
	<LI><P>GTK+ and glib 1.2.6 or above. Please remove any 1.3
	development RPMs from your setup using for example:</P>
	<P>rpm -e gtk+-gtkbeta-devel-1.3.1b-2</P>
	<P>You can get GTK+ and glib for Red Hat 6.2 and above
	from:<BR><BR><A HREF="ftp://ftp.gtk.org/pub/gtk/v1.2/binary/RPMS/RedHat-6.2/RPMS/i386/gtk+-1.2.8-1.i386.rpm">ftp://ftp.gtk.org/pub/gtk/v1.2/binary/RPMS/RedHat-6.2/RPMS/i386/gtk+-1.2.8-1.i386.rpm</A><BR><A HREF="ftp://ftp.gtk.org/pub/gtk/v1.2/binary/RPMS/RedHat-6.2/RPMS/i386/glib-1.2.8-1.i386.rpm">ftp://ftp.gtk.org/pub/gtk/v1.2/binary/RPMS/RedHat-6.2/RPMS/i386/glib-1.2.8-1.i386.rpm</A></P>
	<LI><P>a suitable version of wxWindows for GTK+, available from
	<A HREF="ftp://sources.redhat.com/pub/ecos/ct2/">ftp://sources.redhat.com/pub/ecos/ct2/</A>.</P>
	<P>Unarchive the file wxGTK-x.y.z.tgz into a suitable directory,
	e.g. 
	</P>
	<P><TT>% mkdir /home/julians/wxWindows<BR>% cd /home/julians/wxWindows<BR>%
	tar xvfz /tmp/wxGTK-x.y.z.tgz</TT></P>
	<P>You may also wish to download and unarchive wxWindows
	documentation, which is supplied in zip form. Unarchive using e.g.:</P>
	<P><TT>% cd /home/julians/wxWindows<BR>% unzip -a
	wxWindows-x.y.z-HTML.zip</TT></P>
	<LI><P>an eCos source hierarchy. See
	<A HREF="http://sources.redhat.com/ecos/anoncvs.html">http://sources.redhat.com/ecos/anoncvs.html</A>
	for how to download this from the CVS repository. For example:</P>
	<P><TT>cvs -d :pserver:anoncvs@sources.redhat.com:/cvs/ecos co ecos/host</TT></P>
	<LI><P>other tools:</P>
	<P>Tcl/Tk 8.2 or above. See <A HREF="http://dev.scriptics.com/">http://dev.scriptics.com/</A></P>
</OL>
<H4>Summary:</H4>
<P>There is no 'configure' step for the eCos Configuration Tool as a
whole, although the host tool libraries and wxWindows have configure
scripts which are invoked by the makefile.</P>
<P>You work in a build directory of your choosing, and the makefile
will create the following directories underneath it:</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=59*>
	<COL WIDTH=197*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=23%>
				<P>ct-build-debug/</P>
			</TD>
			<TD WIDTH=77%>
				<P>Configtool debug build</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=23%>
				<P>ecc-build-debug/ 
				</P>
			</TD>
			<TD WIDTH=77%>
				<P>eCos libraries debug build</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=23%>
				<P>wxwin-build-debug/ 
				</P>
			</TD>
			<TD WIDTH=77%>
				<P>wxWindows debug build</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=23%>
				<P>ct-build-release/ 
				</P>
			</TD>
			<TD WIDTH=77%>
				<P>Configtool release build</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=23%>
				<P>ecc-build-release/ 
				</P>
			</TD>
			<TD WIDTH=77%>
				<P>eCos libraries release build</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=23%>
				<P>wxwin-build-release/ 
				</P>
			</TD>
			<TD WIDTH=77%>
				<P>wxWindows release build</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P>You need to pass the wxWindows source directory (WXDIR) and eCos
hierarchy directory (ECOSDIR) to the makefile, along with the build
LEVEL (debug or release). Please see makect.sh in the source
directory, which is a useful helper script for making it easier to
invoke the makefile.</P>
<P>You also supply a target to build, such as full (everything), ct
(just the Configuration Tool), wx (wxWindows only) or ecc (eCos
libraries only). It is important to supply the target as the <B>last</B>
command(s) on the command line.</P>
<P>The makefile builds and uses wxWindows as a static library, which
minimizes problems with shared libraries and still results in a
reasonable size of executable (around 6 MB). Switching off
unnecessary wxWindows features may result in smaller executables.</P>
<P>IMPORTANT NOTE: currently, there are inadequate dependencies in
the makefiles, so please make sure you start with a clean directory
before building (use the cleanct target if necessary).</P>
<H4>Examples:</H4>
<P>This builds the eCos libraries, wxWindows, and the Configuration
Tool, debug mode.</P>
<TT><P>% export ECOSDIR=/home/julians/cvs/eCos # The dir above 'host'<BR>%
export
CONFIGTOOLDIR=$ECOSDIR/host/tools/configtool/standalone/wxwin<BR>%
export WXDIR=/home/julians/wxWindows<BR>% mkdir /tmp/ecos-build<BR>%
cd /tmp/ecos-build<BR>% make -f $CONFIGTOOLDIR/Makefile WXDIR=$WXDIR
ECOSDIR=$ECOSDIR LEVEL=debug full</P>
</TT>
<P>This builds just the Configuration Tool, say after a file was
edited, in release mode.</P>
<TT><P>% export ECOSDIR=/home/julians/cvs/eCos<BR>% export
CONFIGTOOLDIR=$ECOSDIR/host/tools/configtool/standalone/wxwin<BR>%
export WXDIR=/home/julians/wxWindows<BR>% cd /tmp/ecos-build<BR>%
make -f $CONFIGTOOLDIR/Makefile WXDIR=$WXDIR ECOSDIR=$ECOSDIR
LEVEL=release ct</P>
</TT>
<H4>Troubleshooting</H4>
<P>Please see the FAQ for what to do if the wxWindows file
dcclient.cpp fails to compile.</P>
<H2>Building the Configuration Tool under Windows</H2>
<H4>You will need:</H4>
<OL>
	<LI><P>Microsoft Visual C++ 6.0 or later</P>
	<LI><P>a suitable version of wxWindows for MS Windows, available
	from <A HREF="ftp://sources.redhat.com/pub/ecos/ct2/">ftp://sources.redhat.com/pub/ecos/ct2/</A>.
	To install the sources in 'setup' form, just run the executable and
	follow the instructions. If you have downloaded the sources in zip
	format, you will need to unarchive the file wxMSW-x.y.z.zip into a
	suitable directory, e.g.</P>
    <TT>
	<P>&gt; mkdir c:\wxWindows<BR>&gt; c:<BR>&gt; cd \wxWindows<BR>&gt;
	unzip c:\temp\wxMSW-x.y.z.zip</P>
	</TT>
	<P>Alternatively, you can use WinZip or similar utility to unarchive
	the files.</P>
	<P>Documentation in Windows HTML Help format is supplied in the
	setup or zipped distribution and does not have to be downloaded
	separately.</P>
	<LI><P>an eCos source hierarchy. See
	<A HREF="http://sources.redhat.com/ecos/anoncvs.html">http://sources.redhat.com/ecos/anoncvs.html</A>
	for how to download this from the CVS repository. For example:</P>
	<TT><P>cvs -d :pserver:anoncvs@sources.redhat.com:/cvs/ecos co ecos/host</P></TT>
	<LI><P>other tools:</P>
	<UL>
		<LI><P>Cygwin (sometimes called GNUPro). See
		<A HREF="http://sources.redhat.com/cygwin/">http://sources.redhat.com/cygwin/</A></P>
		<LI><P>Tcl/Tk 8.2 or above. See <A HREF="http://dev.scriptics.com/">http://dev.scriptics.com/</A></P>
	</UL>
</OL>
<H4>Summary:</H4>
<P>There are two main steps: building wxWindows, and building the
Configuration Tool. The Configuration Tool project file also builds
the required eCos libraries. Note that unlike compilation under
Linux, the wxWindows objects and libraries end up in the wxWindows
source tree.</P>
<P>Before routinely building the Configuration Tool, you will need to
set up Visual C++ with the correct paths (see below).</P>
<H4>Steps:</H4>
<OL>
	<LI><P>Execute in a DOS box:</P>
	<TT><P>subst v: d:\tmp</P></TT>
	<P>where d:\tmp is a suitable temporary directory where the
	Configuration Tool binaries and objects will end up.</P>
	<LI><P>Set the TCLHOME environment variable to where Tcl is
	installed. On Windows 9x, edit autoexec.bat. On Windows NT or W2K,
	use the System control panel applet.</P>
	<LI><P>Build wxWindows. To do this, run VC++ and open src/msvc.dsw
	in the wxWindows project hierarchy. Select Build | Batch Build and
	check &quot;wxvc - WIN32 Debug&quot; and &quot;wxvc - WIN32
	Release&quot;. Click on Build.</P>
	<LI><P>Open the
	eCos/ecc/host/tools/configtool/standalone/wxwin/ConfigtoolVC.dsw
	workspace. Choose Tools | Options and click on the Directories tab.</P>
	<P>Select Show directories for: Include files.</P>
	<P>You need to add paths such as these:</P>
    <TT>
	<P>c:\Program Files\Tcl\include<BR>d:\wxWindows-010212\include</P></TT>
	<P>Select Show directories for: Library files. Add these paths,
	changing as necessary:</P>
	<TT>
	<P>c:\Program Files\Tcl\lib<BR>d:\wxWindows-010212\lib</P>
	</TT>
	<LI><P>Click on Select Active Configuration... and select the one
	you wish to build, such as WIN32 Ansi Debug (note that Unicode
	configurations are not yet available). Choose Build | Rebuild All to
	build the project. The configtool.exe executable should end up in
	v:\Configtool\AnsiDebug.</P>
</OL>
<P>When compiled, configtool.exe depends on the following DLLs found
in your system32 directory that should be supplied with the
executable:</P>
<UL>
	<LI>TCL82.DLL (or other name if you used a different version of
	TCL)
	<LI>MSVCIRT.DLL
	<LI>MSVCP60.DLL
	<LI>MSVCRT.DLL
</UL>
<P><!-- EndFragment --></P>
</BODY>
</HTML>
